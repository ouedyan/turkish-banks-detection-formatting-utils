import 'dart:math';
import 'dart:ui';

class Bank {
  final String name;
  final String? image;
  final RegExp pattern;
  final Color? mainColor;

  const Bank(this.name, this.image, this.pattern, {this.mainColor});

  /// Returns the corresponding Bank from a given card number.
  ///
  /// Returns null if no match is found.
  static Future<Bank?> fromCardNumber(String cardNumber) async {
    try {
      return list.singleWhere((element) =>
          element.pattern.hasMatch(cardNumber.replaceAll(r'[^0-9]+', '')));
    } on StateError {
      return null;
    }
  }

  // Recognised Bank list with their corresponding patterns and data
  static List<Bank> list = [
    Bank(
        vakifBank,
        'assets/icons/ic_vakifbank.png',
        RegExp(
            r'^(537504|428945|423478|535576|520017|542798|589311|442671|459252|552101|547244|540045|540046|493846|493841|493840|542804|402940|409084|416757|491005|979209|479909|479908|411942|411943|411944|483612|411724|554548|411979|113015|415792|542119)[0-9]{0,10}$'),
        mainColor: const Color(0xFFFBC34E)),
    Bank(
        ziraatBank,
        'assets/icons/ic_ziraat.png',
        RegExp(
            r'^(528208|469884|407814|542374|533154|513662|516932|454672|454673|454671|454674|547287|527682|482465|523529|476619|404591|413226|444676|444678|444677|979217|531102|676124|676123|447504|534981|540134|540130|530905|512440|546957|549449)[0-9]{0,10}$'),
        mainColor: const Color(0xFFE00B13)),
    Bank(
        akBank,
        'assets/icons/ic_akbank.png',
        RegExp(
            r'^(535280|435508|557113|557829|432072|432071|589004|535449|520932|553056|534253|521807|493837|474853|474854|425669|479680|479681|512754|413252|979206|979207|979208|550383|524347|516841|516840|521942|552609|552608|435509)[0-9]{0,10}$'),
        mainColor: const Color(0xFFAD000A)),
    Bank(
        albaraka,
        'assets/icons/ic_albaraka.png',
        RegExp(
            r'^(677397|533796|424935|423002|534264|417716|417715|479671|979227|979226|511583|432284|432285|533973|548232|547234|627510)[0-9]{0,10}$'),
        mainColor: const Color(0xFF186E3F)),
    Bank(
        garanti,
        'assets/icons/ic_garanti.png',
        RegExp(
            r'^(558699|426888|426889|622403|426886|426887|528939|401738|405090|528956|375622|375624|375623|375627|375628|375625|375626|375629|375631|520097|589318|554960|405051|516961|489478|374421|374424|374425|374422|413836|676255|420557|420556|520988|521824|409219|521825|514915|516943|374426|374427|533169|479662|479661|479660|520940|543738|461668|535429|540036|540037|534261|535488|522204|474151|676283|493845|520922|540669|524659|492193|492187|492186|676827|403280|482489|554253|554254|482491|482490|676651|557023|670606|410141|540709|448472|526955|479682|542030|377137|979236|427314|427315|432154|979205|489455|487074|487075|467295|467294|467293|462274|490175|541865|428221|428220|548935|517040|517042|379371|517041|544294|517048|517049|379370|379369|553130|540118|544078|403666|404308)[0-9]{0,19}$'),
        mainColor: const Color(0xFF009918)),
    Bank(
        denizBank,
        'assets/icons/ic_denizbank.png',
        RegExp(
            r'^(520019|529876|423667|558460|508129|403134|512017|558446|558443|558448|483747|510063|529545|533330|514924|516914|424360|424361|113134|520303|441139|515865|520909|516731|516740|558514|554483|476662|523515|670610|409070|472915|979220|543358|601912|472914|512117|489458|489457|489456|462276|411924|408625|543400|533293|543427|404990|517047|552679|462448|462449|510118|510119|465574|522517|460345|460346|546764|460347)[0-9]{0,10}$'),
        mainColor: const Color(0xFF0F3F76)),
    Bank(
        isBankasi,
        'assets/icons/ic_isbankasi.png',
        RegExp(
            r'^(535514|552096|450803|553058|589283|603125|540668|540667|479610|543771|441076|441077|441075|454360|454359|454358|454318|454314|979233|979204|483602|510152|548237|418345|418344|418342|418343|113064)[0-9]{0,10}$'),
        mainColor: const Color(0xFF0C4371)),
    Bank(
        kuveytturk,
        'assets/icons/ic_kuveytturk.png',
        RegExp(
            r'^(403810|525312|410555|410556|483714|402589|547564|402592|402591|402590|511660|403360|518896|512595|527083|677055|520180|979216|424487|431024|483674|483673)[0-9]{0,10}$'),
        mainColor: const Color(0xFF00684B)),
    Bank(
        qnbFinansBank,
        'assets/icons/ic_qnbfinansbank.png',
        RegExp(
            r'^(402277|402278|406386|499851|499852|499853|499850|498749|409364|401072|422376|529572|542404|521836|402563|547567|423277|435653|431379|677238|459333|444029|601050|410147|545847|479679|441007|545120|423398|403082|427311|979202|979203|547800|519324|415956|516835|420092|531157|545616|442395|521022|414388|530818|415565|413583)[0-9]{0,10}$'),
        mainColor: const Color(0xFF003A73)),
    Bank(
        yapiKredi,
        'assets/icons/ic_yapikredi.png',
        RegExp(
            r'^(639004|413382|510054|420342|420343|450634|535435|479620|479612|603797|554422|404809|479795|479794|490983|537833|525864|540062|540061|540063|476625|476626|492131|492130|492128|545103|979241|491205|491206|516888|494314|535602|535601|979215|401622|477959|455359|533913|552645|552659|676166|442106|446212|414392|540122|540129|542117)[0-9]{0,10}$'),
        mainColor: const Color(0xFF0C4371)),
    Bank(
        halkBank,
        'assets/icons/ic_halkbank.png',
        RegExp(
            r'^(639001|415514|415515|526289|526290|543081|676258|440776|510056|421030|499821|540435|521378|492094|492095|451454|588843|552879|979212|979210|447505|498852|113012)[0-9]{0,10}$'),
        mainColor: const Color(0xFF005192)),
    Bank(
        teb,
        'assets/icons/ic_teb.png',
        RegExp(
            r'^(531531|115032|413528|525314|528920|512803|438040|440247|459026|489496|489494|489495|553090|606329|547985|469188|550449|527026|427707|440293|440294|440295|535217|440273|440274|404350|510221|402142|450918|979223|545124|532581|512753|524839|528825|524840|479227|542259|406015|545148|676406|455645|427308|676578|552207|524346|534538|510139|510138|447503|549998|519780|402459|402458|530853|113032|416350|404315)[0-9]{0,10}$'),
        mainColor: const Color(0xFF008052)),
  ];

  // Recognised Banks
  static const String akBank = 'AkBank';
  static const String albaraka = 'Albaraka';
  static const String denizBank = 'Deniz Bank';
  static const String garanti = 'Garanti';
  static const String halkBank = 'HalkBank';
  static const String isBankasi = 'İş Bankası';
  static const String kuveytturk = 'Kuveyttürk';
  static const String qnbFinansBank = 'QNB FinansBank';
  static const String teb = 'TEB';
  static const String vakifBank = 'VakıfBank';
  static const String yapiKredi = 'Yapı Kredi';
  static const String ziraatBank = 'ZiraatBank';

  /// Returns a random recognized turkish bank card number prefix
  static int generateRandomRecognisedBankCardNumberPrefix() {
    // Some recognized turkish bank card number prefix list
    const randomRecognisedPrefixList = [
      537504,
      428945,
      423478,
      535576,
      520017,
      542798,
      589311,
      442671,
      459252,
      552101,
      547244,
      540045,
      540046,
      493846,
      493841,
      493840,
      542804,
      402940,
      409084,
      416757,
      491005,
      979209,
      479909,
      479908,
      411942,
      411943,
      411944,
      483612,
      411724,
      554548,
      411979,
      113015,
      415792,
      542119,
      407814,
      542374,
      533154,
      513662,
      516932,
      454672,
      454673,
      454671,
      454674,
      547287,
      527682,
      482465,
      523529,
      476619,
      557113,
      557829,
      432072,
      432071,
      589004,
      535449,
      520932,
      553056,
      534253,
      521807,
      493837,
      474853,
      423002,
      534264,
      417716,
      417715,
      479671,
      979227,
      979226,
      511583,
      432284,
      432285,
      533973,
      548232,
      115032,
      413528,
      525314,
      528920,
      512803,
      438040,
      440247,
      459026,
      489496,
      489494,
      489495,
      510054,
      420342,
      420343,
      450634,
      535435,
      479620,
      479612,
      603797,
      554422,
      404809,
      479795,
      483714,
      402589,
      547564,
      402592,
      402591,
      402590,
      511660,
      589283,
      603125,
      540668,
      540667,
      479610,
      543771,
      441076,
      441077,
      441075,
      454360,
      454359,
      508129,
      403134,
      512017,
      558446,
      558443,
      558448,
      483747,
      510063,
      529545,
      533330,
      514924,
      516914,
      426888,
      426889,
      622403,
      426886,
      426887,
      528939,
      401738,
      405090,
      528956,
      375622,
      375624,
      375623,
      375627,
      375628,
      375625
    ];
    return randomRecognisedPrefixList[
        Random().nextInt(randomRecognisedPrefixList.length)];
  }
}
